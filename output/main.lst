mads 2.1.1
   129 					opt l+
    98
    99 				.print 'ZPAGE: ',psptr,'..',zpend-1
    99 				ZPAGE: $0002..$0057
   100
   101 				.print 'RTLIB: ',RTLIB,'..',*-1
   101 				RTLIB: $1044..$10B6
   102
   103 				; ------------------------------------------------------------
   104
   105 10B7			START
   106 10B7 BA				tsx
   107 10B8 8E 63 1A			stx MAIN.@halt+1
   108
   109 					.ifdef fmulinit
   110 					fmulinit
   111 					eif
   112
   113 = 0045			VLEN	= VARDATASIZE-VARINITSIZE
   114 = 1A7A			VADR	= DATAORIGIN+VARINITSIZE
   115
   116 					ift VADR > $BFFF
   117 					ert 'Invalid memory address range ',VADR
   118 					eli (VLEN>0) && (VLEN<=256)
   119 10BB A2 BB			ldx #256-VLEN
   120 10BD A9 00			lda #$00
   121 10BF 9D BF 19 E8 D0 FA		sta:rne VADR+VLEN-256,x+
   122 					eli VLEN>0
   123 					@fill #VADR #VLEN #$00
   124 					eif
   125
   126 10C5 A9 BF 85 02 A9 1A + 	mwa #PROGRAMSTACK psptr
   127
   128 10CD A2 00			ldx #$00
   129 10CF 86 10			stx bp						; BP = 0
   130
   131 10D1 CA				dex						; X = 255
   132
   133 10D2				UNITINITIALIZATION
Macro: UNITINITIALIZATION [Source: main.a65]
Source: main.a65
   134
   135 10D2			.local	MAIN						; PROCEDURE
   136
   137 10D2 4C 04 1A			jmp l_0007
   138
   139 				; ------------------------------------------------------------
   140
   141 10D5			.local	SYSTEM						; UNIT
   142
   143 10D5			.local	PEEK						; FUNCTION | ASSEMBLER | REGISTER
   144
   145 				; ------------------------------------------------------------
   146
   147 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   148 				; as Pointer
   149 10D5 B5 18			lda :STACKORIGIN,x
   150 10D7 85 08			sta A
   151 10D9 B5 28			lda :STACKORIGIN+STACKWIDTH,x
   152 10DB 85 09			sta A+1
   153 10DD CA				dex
   154
   155 				; ---------------------  ASM Block 001  ---------------------
   156
   157 10DE A0 00			ldy #0
   158 10E0 B1 08 8D 7F 1A		mva (edx),y Result
   159
   160 10E5			@exit
   161
   162 				; ------------------------------------------------------------
   163
   164 				; Push BYTE / CHAR / SHORTINT / BOOLEAN
   165 				; as Pointer
   166
   167 10E5 E8				inx
   168 10E6 AD 7F 1A 95 18		mva RESULT :STACKORIGIN,x
   169
   170 					.ifdef @new
   171 					lda <@VarData
   172 					sta :ztmp
   173 					lda >@VarData
   174 					ldy #@VarDataSize-1
   175 					jmp @FreeMem
   176 					eif
   177
   178 				; ------------------------------------------------------------
   179
   180 = 0008			A	= edx
   181 = 1A7F			RESULT	= DATAORIGIN+$000B
   182
   183 = 1A7F			@VarData	= RESULT
   184 = 0001			@VarDataSize	= 1
   185
   186 10EB 60				rts						; ret
   187 				.endl
   188
   189 10EC			.local	POKE						; PROCEDURE | ASSEMBLER | REGISTER
   190
   191 				; ------------------------------------------------------------
   192
   193 				; Generate Assignment for BYTE / CHAR / SHORTINT / BOOLEAN
   194 				; as Pointer
   195 10EC B5 18			lda :STACKORIGIN,x
   196 10EE 85 0C			sta VALUE
   197 10F0 CA				dex
   198
   199 				; ------------------------------------------------------------
   200
   201 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   202 				; as Pointer
   203 10F1 B5 18			lda :STACKORIGIN,x
   204 10F3 85 08			sta A
   205 10F5 B5 28			lda :STACKORIGIN+STACKWIDTH,x
   206 10F7 85 09			sta A+1
   207 10F9 CA				dex
   208
   209 				; ---------------------  ASM Block 016  ---------------------
   210
   211 10FA A0 00			ldy #0
   212 10FC A5 0C 91 08			mva value (edx),y
   213
   214
   215 				; ------------------------------------------------------------
   216
   217 = 0008			A	= edx
   218 = 000C			VALUE	= ecx
   219 1100			@exit
   220 					.ifdef @new
   221 					lda <@VarData
   222 					sta :ztmp
   223 					lda >@VarData
   224 					ldy #@VarDataSize-1
   225 					jmp @FreeMem
   226 					els
   227 1100 60				rts						; ret
   228 					eif
   229 				.endl
   230
   231 1101			.local	DPOKE						; PROCEDURE | ASSEMBLER | REGISTER
   232
   233 				; ------------------------------------------------------------
   234
   235 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   236 				; as Pointer
   237 1101 B5 18			lda :STACKORIGIN,x
   238 1103 85 0C			sta VALUE
   239 1105 B5 28			lda :STACKORIGIN+STACKWIDTH,x
   240 1107 85 0D			sta VALUE+1
   241 1109 CA				dex
   242
   243 				; ------------------------------------------------------------
   244
   245 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   246 				; as Pointer
   247 110A B5 18			lda :STACKORIGIN,x
   248 110C 85 08			sta A
   249 110E B5 28			lda :STACKORIGIN+STACKWIDTH,x
   250 1110 85 09			sta A+1
   251 1112 CA				dex
   252
   253 				; ---------------------  ASM Block 017  ---------------------
   254
   255 1113 A0 00			ldy #0
   256 1115 A5 0C 91 08			mva value (edx),y
   257 1119 C8				iny
   258 111A A5 0D 91 08			mva value+1 (edx),y
   259
   260
   261 				; ------------------------------------------------------------
   262
   263 = 0008			A	= edx
   264 = 000C			VALUE	= ecx
   265 111E			@exit
   266 					.ifdef @new
   267 					lda <@VarData
   268 					sta :ztmp
   269 					lda >@VarData
   270 					ldy #@VarDataSize-1
   271 					jmp @FreeMem
   272 					els
   273 111E 60				rts						; ret
   274 					eif
   275 				.endl
   276
   277 111F			.local	FILLCHAR_0056					; PROCEDURE | ASSEMBLER | OVERLOAD | REGISTER
   278
   279 				; ---------------------  ASM Block 019  ---------------------
   280
   281 111F 20 5B 10			jsr @fill
   282
   283
   284 				; ------------------------------------------------------------
   285
   286 = 0008			A	= edx
   287 = 000C			COUNT	= ecx
   288 = 0004			VALUE	= eax
   289 1122			@exit
   290 					.ifdef @new
   291 					lda <@VarData
   292 					sta :ztmp
   293 					lda >@VarData
   294 					ldy #@VarDataSize-1
   295 					jmp @FreeMem
   296 					els
   297 1122 60				rts						; ret
   298 					eif
   299 				.endl
   300
   301 1123			.local	PAUSE_006B					; PROCEDURE | ASSEMBLER | OVERLOAD
   302
   303 				; ---------------------  ASM Block 035  ---------------------
   304
   305
   306 1123 AD 80 1A		loop  lda n
   307 1126 0D 81 1A		  ora n+1
   308 1129 F0 14		  beq stop
   309
   310 112B A5 A5 C5 A5 F0 FC	  lda:cmp:req :c4p_time+2
   311
   312 1131 AD 80 1A D0 03 CE +   dew n
   313
   314 113C 4C 23 11		  jmp loop
   315 113F			stop
   316
   317
   318 				; ------------------------------------------------------------
   319
   320 = 1A80			N	= DATAORIGIN+$000C
   321
   322 = 1A80			@VarData	= N
   323 = 0002			@VarDataSize	= 2
   324
   325 113F			@exit
   326 					.ifdef @new
   327 					lda <@VarData
   328 					sta :ztmp
   329 					lda >@VarData
   330 					ldy #@VarDataSize-1
   331 					jmp @FreeMem
   332 					els
   333 113F 60				rts						; ret
   334 					eif
   335 				.endl
   336
   337 1140			.local	RANDOM_006C					; FUNCTION | ASSEMBLER | OVERLOAD
   338 1140 8D 82 1A			sta RANGE
   339
   340 				; ---------------------  ASM Block 039  ---------------------
   341
   342
   343 1143 AD 00 FF		  lda ted_timer_1   //Timer A Lo byte
   344 1146 4D 01 FF		  eor ted_timer_1+1 //Timer A Hi byte
   345 1149 4D 02 FF		  eor ted_timer_2   //Timer B Lo byte
   346 114C 6D 1E FF		  adc ted_hcount    //Horizontal counter
   347 114F 4D 04 FF		  eor ted_timer_3   //Timer C Lo byte
   348 1152 4D 1E FF		  eor ted_hcount    //Horizontal counter
   349 1155 A8			  tay
   350
   351 1156 AD 82 1A		  lda range
   352 1159 F0 08		  beq stop
   353
   354 115B 85 0C		  sta ecx
   355 115D 84 04		  sty eax
   356
   357 115F 20 A3 10		  jsr imulCL
   358 1162 A8			  tay
   359
   360 1163 8C 83 1A		stop  sty Result
   361
   362 1166			@exit
   363
   364 				; ------------------------------------------------------------
   365
   366 				; Push BYTE / CHAR / SHORTINT / BOOLEAN
   367 				; as Pointer
   368
   369 1166 E8				inx
   370 1167 AD 83 1A 95 18		mva RESULT :STACKORIGIN,x
   371
   372 					.ifdef @new
   373 					lda <@VarData
   374 					sta :ztmp
   375 					lda >@VarData
   376 					ldy #@VarDataSize-1
   377 					jmp @FreeMem
   378 					eif
   379
   380 				; ------------------------------------------------------------
   381
   382 = 1A82			RANGE	= DATAORIGIN+$000E
   383 = 1A83			RESULT	= DATAORIGIN+$000F
   384
   385 = 1A82			@VarData	= RANGE
   386 = 0002			@VarDataSize	= 2
   387
   388 116C 60				rts						; ret
   389 				.endl
   390
   391 				; ------------------------------------------------------------
   392
   393 = 0101			__PORTB_BANKS	= $0101
   394 = 0648			M_PI_2	= $0648
   395 = 0192			D_PI_2	= $0192
   396 = 0004			D_PI_180	= $04
   397 = 0000			MGTIA	= $00
   398 = 0080			MVBXE	= $80
   399 = 0000			VBXE_XDLADR	= $00
   400 = 0100			VBXE_BCBADR	= $0100
   401 = 1000			VBXE_MAPADR	= $1000
   402 = 5000			VBXE_OVRADR	= $5000
   403 = B000			VBXE_WINDOW	= $B000
   404 = 0000			IDLI	= $00
   405 = 0001			IVBL	= $01
   406 = 00FE			CH_DELCHR	= $FE
   407 = 009B			CH_ENTER	= $9B
   408 = 001B			CH_ESC	= $1B
   409 = 001C			CH_CURS_UP	= $1C
   410 = 001D			CH_CURS_DOWN	= $1D
   411 = 001E			CH_CURS_LEFT	= $1E
   412 = 001F			CH_CURS_RIGHT	= $1F
   413 = 007F			CH_TAB	= $7F
   414 = 009B			CH_EOL	= $9B
   415 = 007D			CH_CLR	= $7D
   416 = 00FD			CH_BELL	= $FD
   417 = 007E			CH_DEL	= $7E
   418 = 009C			CH_DELLINE	= $9C
   419 = 009D			CH_INSLINE	= $9D
   420 = 0000			COLOR_BLACK	= $00
   421 = 000E			COLOR_WHITE	= $0E
   422 = 0032			COLOR_RED	= $32
   423 = 0096			COLOR_CYAN	= $96
   424 = 0068			COLOR_VIOLET	= $68
   425 = 00C4			COLOR_GREEN	= $C4
   426 = 0074			COLOR_BLUE	= $74
   427 = 00EE			COLOR_YELLOW	= $EE
   428 = 0028			COLOR_ORANGE	= $28
   429 = 00E4			COLOR_BROWN	= $E4
   430 = 003C			COLOR_LIGHTRED	= $3C
   431 = 0004			COLOR_GRAY1	= $04
   432 = 0006			COLOR_GRAY2	= $06
   433 = 000A			COLOR_GRAY3	= $0A
   434 = 00CC			COLOR_LIGHTGREEN	= $CC
   435 = 007C			COLOR_LIGHTBLUE	= $7C
   436 = 0004			FMOPENREAD	= $04
   437 = 0008			FMOPENWRITE	= $08
   438 = 0009			FMOPENAPPEND	= $09
   439 = 000C			FMOPENREADWRITE	= $0C
   440 = 1A74			SCREENWIDTH	= DATAORIGIN+$0000
   441 = 1A76			SCREENHEIGHT	= DATAORIGIN+$0002
   442 = 1A78			DATESEPARATOR	= DATAORIGIN+$0004
   443 = D014			TVSYSTEM	= $D014
   444 = D20A			RND	= $D20A
   445 = 02C0			adr.PALETTE	= $02C0
   446 116D			.var PALETTE	= adr.PALETTE .word
   447 = D012			adr.HPALETTE	= $D012
   448 116D			.var HPALETTE	= adr.HPALETTE .word
   449 = 1A79			FILEMODE	= DATAORIGIN+$0005
   450 = 1A7A			GRAPHMODE	= DATAORIGIN+$0006
   451 = 1A7B			IORESULT	= DATAORIGIN+$0007
   452 = 1A7C			EOLN	= DATAORIGIN+$0008
   453 = 1A7D			RNDSEED	= DATAORIGIN+$0009
   454
   455 = 116D C0 02		PALETTE
   455 = 116F 12 D0		HPALETTE
   455 				.endl							; UNIT SYSTEM
   456
   457 1171			.local	PUTCHAR						; PROCEDURE
   458
   459 				; optimize OK (tools.inc), line = 5
   460
   461 1171 AD A8 1A			lda Y
   462 1174 0A				asl @
   463 1175 A8				tay
   464 1176 B9 0E 10			lda adr.MUL40,y
   465 1179 18 6D A7 1A			add X
   466 117D 85 5B			sta T0W
   467 117F B9 0F 10			lda adr.MUL40+1,y
   468 1182 69 08			adc #$08
   469 1184 85 5C			sta T0W+1
   470
   471 				; optimize OK (tools.inc), line = 6
   472
   473 1186 85 11			sta :bp+1
   474 1188 A4 5B			ldy T0W
   475 118A AD AA 1A			lda C
   476 118D 91 10			sta (:bp),y
   477 118F A5 5C			lda T0W+1
   478 1191 18 69 04			add #$04
   479 1194 85 11			sta :bp+1
   480 1196 AD A9 1A			lda V
   481 1199 91 10			sta (:bp),y
   482
   483 				; ------------------------------------------------------------
   484
   485 = 1AA7			X	= DATAORIGIN+$0033
   486 = 1AA8			Y	= DATAORIGIN+$0034
   487 = 1AA9			V	= DATAORIGIN+$0035
   488 = 1AAA			C	= DATAORIGIN+$0036
   489
   490 = 1AA7			@VarData	= X
   491 = 0004			@VarDataSize	= 4
   492
   493 119B			@exit
   494 					.ifdef @new
   495 					lda <@VarData
   496 					sta :ztmp
   497 					lda >@VarData
   498 					ldy #@VarDataSize-1
   499 					jmp @FreeMem
   500 					els
   501 119B 60				rts						; ret
   502 					eif
   503 				.endl
   504
   505 119C			.local	SHOWSCORE					; PROCEDURE
   506
   507 				; optimize OK (tools.inc), line = 13
   508
   509 119C AD 8A 1A			lda PLAYER1.COLOUR
   510 119F 8D AA 1A			sta PUTCHAR.C
   511 11A2 AD 8D 1A			lda PLAYER1.SCORE
   512 11A5 8D A9 1A			sta PUTCHAR.V
   513 11A8 A9 00			lda #$00
   514 11AA 8D A8 1A			sta PUTCHAR.Y
   515 11AD A9 1E			lda #$1E
   516 11AF 8D A7 1A			sta PUTCHAR.X
   517 11B2 20 71 11			jsr PUTCHAR
   518
   519 				; optimize OK (tools.inc), line = 14
   520
   521 11B5 AD 92 1A			lda PLAYER2.COLOUR
   522 11B8 8D AA 1A			sta PUTCHAR.C
   523 11BB AD 95 1A			lda PLAYER2.SCORE
   524 11BE 8D A9 1A			sta PUTCHAR.V
   525 11C1 A9 00			lda #$00
   526 11C3 8D A8 1A			sta PUTCHAR.Y
   527 11C6 A9 20			lda #$20
   528 11C8 8D A7 1A			sta PUTCHAR.X
   529 11CB 20 71 11			jsr PUTCHAR
   530
   531 				; optimize OK (tools.inc), line = 15
   532
   533 11CE AD 9A 1A			lda PLAYER3.COLOUR
   534 11D1 8D AA 1A			sta PUTCHAR.C
   535 11D4 AD 9D 1A			lda PLAYER3.SCORE
   536 11D7 8D A9 1A			sta PUTCHAR.V
   537 11DA A9 00			lda #$00
   538 11DC 8D A8 1A			sta PUTCHAR.Y
   539 11DF A9 22			lda #$22
   540 11E1 8D A7 1A			sta PUTCHAR.X
   541 11E4 20 71 11			jsr PUTCHAR
   542
   543 				; optimize OK (tools.inc), line = 16
   544
   545 11E7 AD A2 1A			lda PLAYER4.COLOUR
   546 11EA 8D AA 1A			sta PUTCHAR.C
   547 11ED AD A5 1A			lda PLAYER4.SCORE
   548 11F0 8D A9 1A			sta PUTCHAR.V
   549 11F3 A9 00			lda #$00
   550 11F5 8D A8 1A			sta PUTCHAR.Y
   551 11F8 A9 24			lda #$24
   552 11FA 8D A7 1A			sta PUTCHAR.X
   553 11FD 20 71 11			jsr PUTCHAR
   554 1200			@exit
   555 					.ifdef @new
   556 					lda <@VarData
   557 					sta :ztmp
   558 					lda >@VarData
   559 					ldy #@VarDataSize-1
   560 					jmp @FreeMem
   561 					els
   562 1200 60				rts						; ret
   563 					eif
   564 				.endl
   565
   566 1201			.local	CHECKAVAILDIR					; PROCEDURE
   567
   568 				; optimize OK (tools.inc), line = 23
   569
   570 1201 A9 00			lda #$00
   571 1203 85 5A			sta AVAILDIR
   572
   573 				; optimize OK (tools.inc), line = 24
   574
   575 1205 AD AC 1A			lda Y
   576 1208 0A				asl @
   577 1209 A8				tay
   578 120A B9 0E 10			lda adr.MUL40,y
   579 120D 18 6D AB 1A			add X
   580 1211 85 5B			sta T0W
   581 1213 B9 0F 10			lda adr.MUL40+1,y
   582 1216 69 0C			adc #$0C
   583 1218 85 5C			sta T0W+1
   584
   585 				; optimize OK (tools.inc), line = 26
   586
   587 121A A5 5B			lda T0W
   588 121C 38 E9 28			sub #$28
   589 121F 85 21			sta :STACKORIGIN+9
   590 1221 A5 5C			lda T0W+1
   591 1223 E9 00			sbc #$00
   592 1225 85 11			sta :bp+1
   593 1227 A4 21			ldy :STACKORIGIN+9
   594 1229 B1 10			lda (:bp),y
   595 122B C9 20			cmp #$20
   596 122D D0 06			jne l_00EE
   597 122F A5 5A			lda AVAILDIR
   598 1231 09 01			ora #$01
   599 1233 85 5A			sta AVAILDIR
   600 1235			l_00EE
   601
   602 				; optimize OK (tools.inc), line = 27
   603
   604 1235 A4 5B 84 12 A4 5C + 	mwy T0W :bp2
   605 123D A0 28			ldy #$28
   606 123F B1 12			lda (:bp2),y
   607 1241 C9 20			cmp #$20
   608 1243 D0 06			jne l_0111
   609 1245 A5 5A			lda AVAILDIR
   610 1247 09 02			ora #$02
   611 1249 85 5A			sta AVAILDIR
   612 124B			l_0111
   613
   614 				; optimize OK (tools.inc), line = 28
   615
   616 124B A5 5B			lda T0W
   617 124D 38 E9 01			sub #$01
   618 1250 85 21			sta :STACKORIGIN+9
   619 1252 A5 5C			lda T0W+1
   620 1254 E9 00			sbc #$00
   621 1256 85 11			sta :bp+1
   622 1258 A4 21			ldy :STACKORIGIN+9
   623 125A B1 10			lda (:bp),y
   624 125C C9 20			cmp #$20
   625 125E D0 06			jne l_0134
   626 1260 A5 5A			lda AVAILDIR
   627 1262 09 04			ora #$04
   628 1264 85 5A			sta AVAILDIR
   629 1266			l_0134
   630
   631 				; optimize OK (tools.inc), line = 29
   632
   633 1266 A4 5B 84 12 A4 5C + 	mwy T0W :bp2
   634 126E A0 01			ldy #$01
   635 1270 B1 12			lda (:bp2),y
   636 1272 C9 20			cmp #$20
   637 1274 D0 06			jne l_0157
   638 1276 A5 5A			lda AVAILDIR
   639 1278 09 08			ora #$08
   640 127A 85 5A			sta AVAILDIR
   641 127C			l_0157
   642
   643 				; ------------------------------------------------------------
   644
   645 = 1AAB			X	= DATAORIGIN+$0037
   646 = 1AAC			Y	= DATAORIGIN+$0038
   647
   648 = 1AAB			@VarData	= X
   649 = 0002			@VarDataSize	= 2
   650
   651 127C			@exit
   652 					.ifdef @new
   653 					lda <@VarData
   654 					sta :ztmp
   655 					lda >@VarData
   656 					ldy #@VarDataSize-1
   657 					jmp @FreeMem
   658 					els
   659 127C 60				rts						; ret
   660 					eif
   661 				.endl
   662
   663 127D			.local	INITPLAYERS					; PROCEDURE
   664
   665 				; optimize OK (init.inc), line = 5
   666
   667 127D AD AD 1A			lda P
   668 1280 8D 6A 1A			sta PLY
   669 1283 85 12			sta :bp2
   670 1285 AD AE 1A			lda P+1
   671 1288 8D 6B 1A			sta PLY+1
   672 128B 85 13			sta :bp2+1
   673 				; optimize OK (init.inc), line = 6
   674 128D A0 05			ldy #PLY.BRAIN-DATAORIGIN
   675 128F AD B2 1A			lda BRAIN
   676 1292 91 12			sta (:bp2),y
   677 1294 A0 00			ldy #PLY.X-DATAORIGIN
   678 1296 AD AF 1A			lda X
   679 1299 91 12			sta (:bp2),y
   680 129B A0 01			ldy #PLY.Y-DATAORIGIN
   681 129D AD B0 1A			lda Y
   682 12A0 91 12			sta (:bp2),y
   683 12A2 A0 04			ldy #PLY.DIR-DATAORIGIN
   684 12A4 AD B1 1A			lda DIR
   685 12A7 91 12			sta (:bp2),y
   686
   687 				; optimize OK (init.inc), line = 7
   688
   689 12A9 A0 02			ldy #PLY.HEAD-DATAORIGIN
   690 12AB AD B3 1A			lda HEAD
   691 12AE 91 12			sta (:bp2),y
   692 12B0 A0 03			ldy #PLY.COLOUR-DATAORIGIN
   693 12B2 AD B4 1A			lda COLOUR
   694 12B5 91 12			sta (:bp2),y
   695 12B7 A0 07			ldy #PLY.ISDEAD-DATAORIGIN
   696 12B9 AD B5 1A			lda ISDEAD
   697 12BC 91 12			sta (:bp2),y
   698
   699 				; ------------------------------------------------------------
   700
   701 = 1AAD			P	= DATAORIGIN+$0039
   702 = 1AAF			X	= DATAORIGIN+$003B
   703 = 1AB0			Y	= DATAORIGIN+$003C
   704 = 1AB1			DIR	= DATAORIGIN+$003D
   705 = 1AB2			BRAIN	= DATAORIGIN+$003E
   706 = 1AB3			HEAD	= DATAORIGIN+$003F
   707 = 1AB4			COLOUR	= DATAORIGIN+$0040
   708 = 1AB5			ISDEAD	= DATAORIGIN+$0041
   709
   710 = 1AAD			@VarData	= P
   711 = 0009			@VarDataSize	= 9
   712
   713 12BE			@exit
   714 					.ifdef @new
   715 					lda <@VarData
   716 					sta :ztmp
   717 					lda >@VarData
   718 					ldy #@VarDataSize-1
   719 					jmp @FreeMem
   720 					els
   721 12BE 60				rts						; ret
   722 					eif
   723 				.endl
   724
   725 12BF			.local	INITPLAYFIELD					; PROCEDURE
   726
   727 				; optimize OK (init.inc), line = 14
   728
   729 12BF A9 00			lda #$00
   730 12C1 8D B5 1A			sta INITPLAYERS.ISDEAD
   731 12C4 A9 5F			lda #$5F
   732 12C6 8D B4 1A			sta INITPLAYERS.COLOUR
   733 12C9 A9 51			lda #$51
   734 12CB 8D B3 1A			sta INITPLAYERS.HEAD
   735 12CE A9 00			lda #$00
   736 12D0 8D B2 1A			sta INITPLAYERS.BRAIN
   737 12D3 A9 08			lda #$08
   738 12D5 8D B1 1A			sta INITPLAYERS.DIR
   739 12D8 A9 0C			lda #$0C
   740 12DA 8D B0 1A			sta INITPLAYERS.Y
   741 12DD A9 0A			lda #$0A
   742 12DF 8D AF 1A			sta INITPLAYERS.X
   743 12E2 AD 6C 1A			lda PLAYER1
   744 12E5 8D AD 1A			sta INITPLAYERS.P
   745 12E8 AD 6D 1A			lda PLAYER1+1
   746 12EB 8D AE 1A			sta INITPLAYERS.P+1
   747 12EE 20 7D 12			jsr INITPLAYERS
   748
   749 				; optimize OK (init.inc), line = 15
   750
   751 12F1 A9 00			lda #$00
   752 12F3 8D B5 1A			sta INITPLAYERS.ISDEAD
   753 12F6 A9 5D			lda #$5D
   754 12F8 8D B4 1A			sta INITPLAYERS.COLOUR
   755 12FB A9 51			lda #$51
   756 12FD 8D B3 1A			sta INITPLAYERS.HEAD
   757 1300 A9 04			lda #$04
   758 1302 8D B2 1A			sta INITPLAYERS.BRAIN
   759 1305 8D B1 1A			sta INITPLAYERS.DIR
   760 1308 A9 0C			lda #$0C
   761 130A 8D B0 1A			sta INITPLAYERS.Y
   762 130D A9 1E			lda #$1E
   763 130F 8D AF 1A			sta INITPLAYERS.X
   764 1312 AD 6E 1A			lda PLAYER2
   765 1315 8D AD 1A			sta INITPLAYERS.P
   766 1318 AD 6F 1A			lda PLAYER2+1
   767 131B 8D AE 1A			sta INITPLAYERS.P+1
   768 131E 20 7D 12			jsr INITPLAYERS
   769
   770 				; optimize OK (init.inc), line = 16
   771
   772 1321 A9 01			lda #$01
   773 1323 8D B5 1A			sta INITPLAYERS.ISDEAD
   774 1326 A9 71			lda #$71
   775 1328 8D B4 1A			sta INITPLAYERS.COLOUR
   776 132B A9 51			lda #$51
   777 132D 8D B3 1A			sta INITPLAYERS.HEAD
   778 1330 A9 01			lda #$01
   779 1332 8D B2 1A			sta INITPLAYERS.BRAIN
   780 1335 A9 02			lda #$02
   781 1337 8D B1 1A			sta INITPLAYERS.DIR
   782 133A A9 06			lda #$06
   783 133C 8D B0 1A			sta INITPLAYERS.Y
   784 133F A9 14			lda #$14
   785 1341 8D AF 1A			sta INITPLAYERS.X
   786 1344 AD 70 1A			lda PLAYER3
   787 1347 8D AD 1A			sta INITPLAYERS.P
   788 134A AD 71 1A			lda PLAYER3+1
   789 134D 8D AE 1A			sta INITPLAYERS.P+1
   790 1350 20 7D 12			jsr INITPLAYERS
   791
   792 				; optimize OK (init.inc), line = 17
   793
   794 1353 A9 01			lda #$01
   795 1355 8D B5 1A			sta INITPLAYERS.ISDEAD
   796 1358 A9 55			lda #$55
   797 135A 8D B4 1A			sta INITPLAYERS.COLOUR
   798 135D A9 51			lda #$51
   799 135F 8D B3 1A			sta INITPLAYERS.HEAD
   800 1362 A9 03			lda #$03
   801 1364 8D B2 1A			sta INITPLAYERS.BRAIN
   802 1367 A9 01			lda #$01
   803 1369 8D B1 1A			sta INITPLAYERS.DIR
   804 136C A9 12			lda #$12
   805 136E 8D B0 1A			sta INITPLAYERS.Y
   806 1371 A9 14			lda #$14
   807 1373 8D AF 1A			sta INITPLAYERS.X
   808 1376 AD 72 1A			lda PLAYER4
   809 1379 8D AD 1A			sta INITPLAYERS.P
   810 137C AD 73 1A			lda PLAYER4+1
   811 137F 8D AE 1A			sta INITPLAYERS.P+1
   812 1382 20 7D 12			jsr INITPLAYERS
   813
   814 				; optimize OK (init.inc), line = 19
   815
   816 1385 A9 1F			lda #$1F
   817 1387 8D 15 FF			sta BORDERCOLOR
   818 138A A9 00			lda #$00
   819 138C 8D 19 FF			sta BGCOLOR
   820
   821 				; optimize OK (init.inc), line = 20
   822
   823 138F A9 20			lda #$20
   824 1391 85 04			sta SYSTEM.FILLCHAR_0056.VALUE
   825 1393 A9 C0			lda #$C0
   826 1395 85 0C			sta SYSTEM.FILLCHAR_0056.COUNT
   827 1397 A9 03			lda #$03
   828 1399 85 0D			sta SYSTEM.FILLCHAR_0056.COUNT+1
   829 139B A9 00			lda #$00
   830 139D 85 08			sta SYSTEM.FILLCHAR_0056.A
   831 139F A9 0C			lda #$0C
   832 13A1 85 09			sta SYSTEM.FILLCHAR_0056.A+1
   833 13A3 20 1F 11			jsr SYSTEM.FILLCHAR_0056
   834
   835 				; optimize OK (init.inc), line = 22
   836
   837 13A6 A9 27			lda #$27
   838 13A8 85 58			sta T0B
   839
   840 13AA			l_01D8
   841 				; --- ForToDoCondition
   842
   843 				; optimize OK (init.inc), line = 23
   844
   845 13AA A4 58			ldy T0B
   846 13AC A9 A0			lda #$A0
   847 13AE 99 00 0C			sta $0C00,y
   848
   849 				; optimize OK (init.inc), line = 24
   850
   851 13B1 99 C0 0F			sta $0FC0,y
   852
   853 				; optimize OK (init.inc), line = 25
   854
   855 13B4 A9 41			lda #$41
   856 13B6 99 00 08			sta $0800,y
   857
   858 				; optimize OK (init.inc), line = 26
   859
   860 13B9 99 C0 0B			sta $0BC0,y
   861
   862 				; --- ForToDoEpilog
   863 13BC C6 58			dec T0B
   864 13BE 10 EA			jpl l_01D8
   865 13C0			l_01E6
   866
   867 				; optimize OK (init.inc), line = 29
   868
   869 13C0 A9 18			lda #$18
   870 13C2 85 58			sta T0B
   871
   872 13C4			l_0218
   873 				; --- ForToDoCondition
   874 13C4 A5 58			lda T0B
   875 13C6 C9 01			cmp #$01
   876 13C8 90 3A			jcc l_0226
   877
   878 				; optimize OK (init.inc), line = 30
   879
   880 13CA 0A				asl @
   881 13CB A8				tay
   882 13CC A9 FF			lda #$FF
   883 13CE 18 79 0E 10			add adr.MUL40,y
   884 13D2 85 12			sta :bp2
   885 13D4 A9 0B			lda #$0B
   886 13D6 79 0F 10			adc adr.MUL40+1,y
   887 13D9 85 13			sta :bp2+1
   888 13DB A0 00			ldy #$00
   889 13DD A9 A0			lda #$A0
   890 13DF 91 12			sta (:bp2),y
   891 13E1 C8				iny
   892 13E2 91 12			sta (:bp2),y
   893
   894 				; optimize OK (init.inc), line = 31
   895
   896 13E4 A5 58			lda T0B
   897 13E6 0A				asl @
   898 13E7 A8				tay
   899 13E8 A9 FF			lda #$FF
   900 13EA 18 79 0E 10			add adr.MUL40,y
   901 13EE 85 12			sta :bp2
   902 13F0 A9 07			lda #$07
   903 13F2 79 0F 10			adc adr.MUL40+1,y
   904 13F5 85 13			sta :bp2+1
   905 13F7 A0 00			ldy #$00
   906 13F9 A9 41			lda #$41
   907 13FB 91 12			sta (:bp2),y
   908 13FD C8				iny
   909 13FE 91 12			sta (:bp2),y
   910
   911 				; --- ForToDoEpilog
   912 1400 C6 58			dec T0B
   913 1402 10 C0			jpl l_0218
   914 1404			l_0226
   915
   916 				; optimize OK (init.inc), line = 34
   917
   918 1404 AD 8A 1A			lda PLAYER1.COLOUR
   919 1407 8D AA 1A			sta PUTCHAR.C
   920 140A AD 89 1A			lda PLAYER1.HEAD
   921 140D 8D A9 1A			sta PUTCHAR.V
   922 1410 AD 88 1A			lda PLAYER1.Y
   923 1413 8D A8 1A			sta PUTCHAR.Y
   924 1416 AD 87 1A			lda PLAYER1.X
   925 1419 8D A7 1A			sta PUTCHAR.X
   926 141C 20 71 11			jsr PUTCHAR
   927
   928 				; optimize OK (init.inc), line = 35
   929
   930 141F AD 92 1A			lda PLAYER2.COLOUR
   931 1422 8D AA 1A			sta PUTCHAR.C
   932 1425 AD 91 1A			lda PLAYER2.HEAD
   933 1428 8D A9 1A			sta PUTCHAR.V
   934 142B AD 90 1A			lda PLAYER2.Y
   935 142E 8D A8 1A			sta PUTCHAR.Y
   936 1431 AD 8F 1A			lda PLAYER2.X
   937 1434 8D A7 1A			sta PUTCHAR.X
   938 1437 20 71 11			jsr PUTCHAR
   939
   940 				; optimize OK (init.inc), line = 36
   941
   942 143A AD 9A 1A			lda PLAYER3.COLOUR
   943 143D 8D AA 1A			sta PUTCHAR.C
   944 1440 AD 99 1A			lda PLAYER3.HEAD
   945 1443 8D A9 1A			sta PUTCHAR.V
   946 1446 AD 98 1A			lda PLAYER3.Y
   947 1449 8D A8 1A			sta PUTCHAR.Y
   948 144C AD 97 1A			lda PLAYER3.X
   949 144F 8D A7 1A			sta PUTCHAR.X
   950 1452 20 71 11			jsr PUTCHAR
   951
   952 				; optimize OK (init.inc), line = 37
   953
   954 1455 AD A2 1A			lda PLAYER4.COLOUR
   955 1458 8D AA 1A			sta PUTCHAR.C
   956 145B AD A1 1A			lda PLAYER4.HEAD
   957 145E 8D A9 1A			sta PUTCHAR.V
   958 1461 AD A0 1A			lda PLAYER4.Y
   959 1464 8D A8 1A			sta PUTCHAR.Y
   960 1467 AD 9F 1A			lda PLAYER4.X
   961 146A 8D A7 1A			sta PUTCHAR.X
   962 146D 20 71 11			jsr PUTCHAR
   963
   964 				; optimize OK (init.inc), line = 39
   965
   966 1470 A9 35			lda #$35
   967 1472 8D AA 1A			sta PUTCHAR.C
   968 1475 A9 56			lda #$56
   969 1477 8D A9 1A			sta PUTCHAR.V
   970 147A A9 06			lda #$06
   971 147C 8D A8 1A			sta PUTCHAR.Y
   972 147F A9 0A			lda #$0A
   973 1481 8D A7 1A			sta PUTCHAR.X
   974 1484 20 71 11			jsr PUTCHAR
   975
   976 				; optimize OK (init.inc), line = 40
   977
   978 1487 A9 35			lda #$35
   979 1489 8D AA 1A			sta PUTCHAR.C
   980 148C A9 56			lda #$56
   981 148E 8D A9 1A			sta PUTCHAR.V
   982 1491 A9 06			lda #$06
   983 1493 8D A8 1A			sta PUTCHAR.Y
   984 1496 A9 1E			lda #$1E
   985 1498 8D A7 1A			sta PUTCHAR.X
   986 149B 20 71 11			jsr PUTCHAR
   987
   988 				; optimize OK (init.inc), line = 41
   989
   990 149E A9 35			lda #$35
   991 14A0 8D AA 1A			sta PUTCHAR.C
   992 14A3 A9 56			lda #$56
   993 14A5 8D A9 1A			sta PUTCHAR.V
   994 14A8 A9 12			lda #$12
   995 14AA 8D A8 1A			sta PUTCHAR.Y
   996 14AD A9 0A			lda #$0A
   997 14AF 8D A7 1A			sta PUTCHAR.X
   998 14B2 20 71 11			jsr PUTCHAR
   999
  1000 				; optimize OK (init.inc), line = 42
  1001
  1002 14B5 A9 35			lda #$35
  1003 14B7 8D AA 1A			sta PUTCHAR.C
  1004 14BA A9 56			lda #$56
  1005 14BC 8D A9 1A			sta PUTCHAR.V
  1006 14BF A9 12			lda #$12
  1007 14C1 8D A8 1A			sta PUTCHAR.Y
  1008 14C4 A9 1E			lda #$1E
  1009 14C6 8D A7 1A			sta PUTCHAR.X
  1010 14C9 20 71 11			jsr PUTCHAR
  1011
  1012 				; optimize FAIL ('SHOWSCORE', init.inc), line = 44
  1013
  1014 14CC 20 9C 11			jsr SHOWSCORE
  1015
  1016 				; ------------------------------------------------------------
  1017
  1018 = 0000			@FORTMP_01D5	= $00
  1019 = 0001			@FORTMP_0215	= $01
  1020 14CF			@exit
  1021 					.ifdef @new
  1022 					lda <@VarData
  1023 					sta :ztmp
  1024 					lda >@VarData
  1025 					ldy #@VarDataSize-1
  1026 					jmp @FreeMem
  1027 					els
  1028 14CF 60				rts						; ret
  1029 					eif
  1030 				.endl
  1031
  1032 14D0			.local	AISTRAIGHT					; PROCEDURE
  1033
  1034 				; optimize OK (ai.inc), line = 5
  1035
  1036 14D0 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1037 14DA A0 04			ldy #PLY.DIR-DATAORIGIN
  1038 14DC B1 12			lda (:bp2),y
  1039 14DE 25 5A			and AVAILDIR
  1040 14E0 F0 07			jeq l_02A6
  1041 14E2 B1 12			lda (:bp2),y
  1042 14E4 85 59			sta NEWDIR
  1043 14E6 4C 60 15			jmp l_02B6
  1044 14E9			l_02A6
  1045
  1046 				; optimize OK (ai.inc), line = 7
  1047
  1048 14E9 A5 5A			lda AVAILDIR
  1049 14EB C9 03			cmp #$03
  1050 14ED D0 16			jne l_02C8
  1051 14EF A9 00			lda #$00
  1052 14F1 20 40 11			jsr SYSTEM.RANDOM_006C
  1053 14F4 B5 18			lda :STACKORIGIN,x
  1054 14F6 29 01			and #$01
  1055 14F8 95 18			sta :STACKORIGIN,x
  1056 14FA B4 18			ldy :STACKORIGIN,x
  1057 14FC B9 40 10			lda adr.DIRECTION,y
  1058 14FF 85 59			sta NEWDIR
  1059 1501 CA				dex
  1060 1502 4C 1D 15			jmp l_02DE
  1061 1505			l_02C8
  1062
  1063 				; optimize OK (ai.inc), line = 9
  1064
  1065 1505 A5 5A			lda AVAILDIR
  1066 1507 8D B6 1A			sta @CASETMP_0003
  1067 150A C9 01			cmp #$01
  1068 150C D0 07			jne l_02E9
  1069 150E			@
  1070
  1071 				; optimize OK (ai.inc), line = 10
  1072
  1073 150E A9 01			lda #$01
  1074 1510 85 59			sta NEWDIR
  1075
  1076 1512 4C 1D 15			jmp a_0003
  1077 1515			l_02E9
  1078 1515 C9 02			cmp #$02
  1079 1517 D0 04			jne l_02F6
  1080 1519			@
  1081
  1082 				; optimize OK (ai.inc), line = 11
  1083
  1084 1519 A9 02			lda #$02
  1085 151B 85 59			sta NEWDIR
  1086
  1087 151D			l_02F6
  1088 151D			a_0003
  1089 151D			l_02DE
  1090
  1091 				; optimize OK (ai.inc), line = 14
  1092
  1093 151D A5 5A			lda AVAILDIR
  1094 151F C9 0C			cmp #$0C
  1095 1521 D0 25			jne l_0312
  1096 1523 A9 00			lda #$00
  1097 1525 20 40 11			jsr SYSTEM.RANDOM_006C
  1098 1528 B5 18			lda :STACKORIGIN,x
  1099 152A 29 01			and #$01
  1100 152C 95 18			sta :STACKORIGIN,x
  1101 152E E8				inx
  1102 152F A9 02 95 18			mva #$02 :STACKORIGIN,x
  1103 1533 A9 00 95 28			mva #$00 :STACKORIGIN+STACKWIDTH,x
  1104 1537 95 27			sta :STACKORIGIN-1+STACKWIDTH,x
  1105 1539 20 44 10			jsr addAX_CX
  1106 153C CA				dex
  1107 153D B4 18			ldy :STACKORIGIN,x
  1108 153F B9 40 10			lda adr.DIRECTION,y
  1109 1542 85 59			sta NEWDIR
  1110 1544 CA				dex
  1111 1545 4C 60 15			jmp l_032C
  1112 1548			l_0312
  1113
  1114 				; optimize OK (ai.inc), line = 16
  1115
  1116 1548 A5 5A			lda AVAILDIR
  1117 154A 8D B7 1A			sta @CASETMP_0004
  1118 154D C9 04			cmp #$04
  1119 154F D0 07			jne l_0337
  1120 1551			@
  1121
  1122 				; optimize OK (ai.inc), line = 17
  1123
  1124 1551 A9 04			lda #$04
  1125 1553 85 59			sta NEWDIR
  1126
  1127 1555 4C 60 15			jmp a_0004
  1128 1558			l_0337
  1129 1558 C9 08			cmp #$08
  1130 155A D0 04			jne l_0344
  1131 155C			@
  1132
  1133 				; optimize OK (ai.inc), line = 18
  1134
  1135 155C A9 08			lda #$08
  1136 155E 85 59			sta NEWDIR
  1137
  1138 1560			l_0344
  1139 1560			a_0004
  1140 1560			l_032C
  1141 1560			l_02B6
  1142
  1143 				; ------------------------------------------------------------
  1144
  1145 = 1AB6			@CASETMP_0003	= DATAORIGIN+$0042
  1146 = 1AB7			@CASETMP_0004	= DATAORIGIN+$0043
  1147
  1148 = 1AB6			@VarData	= @CASETMP_0003
  1149 = 0002			@VarDataSize	= 2
  1150
  1151 1560			@exit
  1152 					.ifdef @new
  1153 					lda <@VarData
  1154 					sta :ztmp
  1155 					lda >@VarData
  1156 					ldy #@VarDataSize-1
  1157 					jmp @FreeMem
  1158 					els
  1159 1560 60				rts						; ret
  1160 					eif
  1161 				.endl
  1162
  1163 1561			.local	AIMIRROR					; PROCEDURE
  1164
  1165 				; optimize OK (ai.inc), line = 28
  1166
  1167 1561 AD 8B 1A			lda PLAYER1.DIR
  1168 1564 8D B8 1A			sta @CASETMP_0005
  1169 1567 C9 01			cmp #$01
  1170 1569 D0 07			jne l_035D
  1171 156B			@
  1172
  1173 				; optimize OK (ai.inc), line = 29
  1174
  1175 156B A9 02			lda #$02
  1176 156D 85 58			sta T0B
  1177
  1178 156F 4C 90 15			jmp a_0005
  1179 1572			l_035D
  1180 1572 C9 02			cmp #$02
  1181 1574 D0 07			jne l_036A
  1182 1576			@
  1183
  1184 				; optimize OK (ai.inc), line = 30
  1185
  1186 1576 A9 01			lda #$01
  1187 1578 85 58			sta T0B
  1188
  1189 157A 4C 90 15			jmp a_0005
  1190 157D			l_036A
  1191 157D C9 04			cmp #$04
  1192 157F D0 07			jne l_0377
  1193 1581			@
  1194
  1195 				; optimize OK (ai.inc), line = 31
  1196
  1197 1581 A9 08			lda #$08
  1198 1583 85 58			sta T0B
  1199
  1200 1585 4C 90 15			jmp a_0005
  1201 1588			l_0377
  1202 1588 C9 08			cmp #$08
  1203 158A D0 04			jne l_0384
  1204 158C			@
  1205
  1206 				; optimize OK (ai.inc), line = 32
  1207
  1208 158C A9 04			lda #$04
  1209 158E 85 58			sta T0B
  1210
  1211 1590			l_0384
  1212 1590			a_0005
  1213
  1214 				; optimize OK (ai.inc), line = 35
  1215
  1216 1590 A5 5A			lda AVAILDIR
  1217 1592 25 58			and T0B
  1218 1594 F0 07			jeq l_03A8
  1219 1596 A5 58			lda T0B
  1220 1598 85 59			sta NEWDIR
  1221 159A 4C A0 15			jmp l_03B8
  1222 159D			l_03A8
  1223
  1224 				; optimize FAIL ('AISTRAIGHT', ai.inc), line = 36
  1225
  1226 159D 20 D0 14			jsr AISTRAIGHT
  1227 15A0			l_03B8
  1228
  1229 				; ------------------------------------------------------------
  1230
  1231 = 1AB8			@CASETMP_0005	= DATAORIGIN+$0044
  1232
  1233 = 1AB8			@VarData	= @CASETMP_0005
  1234 = 0001			@VarDataSize	= 1
  1235
  1236 15A0			@exit
  1237 					.ifdef @new
  1238 					lda <@VarData
  1239 					sta :ztmp
  1240 					lda >@VarData
  1241 					ldy #@VarDataSize-1
  1242 					jmp @FreeMem
  1243 					els
  1244 15A0 60				rts						; ret
  1245 					eif
  1246 				.endl
  1247
  1248 15A1			.local	AIRANDOM					; PROCEDURE
  1249
  1250 				; optimize OK (ai.inc), line = 43
  1251
  1252 15A1 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1253 15AB A0 04			ldy #PLY.DIR-DATAORIGIN
  1254 15AD B1 12			lda (:bp2),y
  1255 15AF 85 58			sta T0B
  1256
  1257 				; optimize OK (ai.inc), line = 44
  1258
  1259 15B1 A9 00			lda #$00
  1260 15B3 20 40 11			jsr SYSTEM.RANDOM_006C
  1261 15B6 CA				dex
  1262 15B7 B5 19			lda :STACKORIGIN+1,x
  1263 15B9 29 03			and #$03
  1264 15BB D0 0D			jne l_03D8
  1265 15BD			@
  1266 15BD A9 04			lda #$04
  1267 15BF 20 40 11			jsr SYSTEM.RANDOM_006C
  1268 15C2 B4 18			ldy :STACKORIGIN,x
  1269 15C4 B9 40 10			lda adr.DIRECTION,y
  1270 15C7 85 58			sta T0B
  1271 15C9 CA				dex
  1272 15CA			l_03D8
  1273
  1274 				; optimize OK (ai.inc), line = 46
  1275
  1276 15CA A5 5A			lda AVAILDIR
  1277 15CC 25 58			and T0B
  1278 15CE F0 07			jeq l_03FB
  1279 15D0 A5 58			lda T0B
  1280 15D2 85 59			sta NEWDIR
  1281 15D4 4C DA 15			jmp l_040B
  1282 15D7			l_03FB
  1283
  1284 				; optimize FAIL ('AISTRAIGHT', ai.inc), line = 47
  1285
  1286 15D7 20 D0 14			jsr AISTRAIGHT
  1287 15DA			l_040B
  1288 15DA			@exit
  1289 					.ifdef @new
  1290 					lda <@VarData
  1291 					sta :ztmp
  1292 					lda >@VarData
  1293 					ldy #@VarDataSize-1
  1294 					jmp @FreeMem
  1295 					els
  1296 15DA 60				rts						; ret
  1297 					eif
  1298 				.endl
  1299
  1300 15DB			.local	AIBULLY						; PROCEDURE
  1301
  1302 				; optimize OK (ai.inc), line = 54
  1303
  1304 15DB AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1305 15E5 A0 04			ldy #PLY.DIR-DATAORIGIN
  1306 15E7 B1 12			lda (:bp2),y
  1307 15E9 85 58			sta T0B
  1308
  1309 				; optimize OK (ai.inc), line = 56
  1310
  1311 15EB A0 01			ldy #PLY.Y-DATAORIGIN
  1312 15ED AD 88 1A			lda PLAYER1.Y
  1313 15F0 D1 12			cmp (:bp2),y
  1314 15F2 B0 07			jcs l_042A
  1315 15F4 A9 01			lda #$01
  1316 15F6 85 58			sta T0B
  1317 15F8 4C FF 15			jmp l_0438
  1318 15FB			l_042A
  1319 15FB A9 02			lda #$02
  1320 15FD 85 58			sta T0B
  1321 15FF			l_0438
  1322
  1323 				; optimize OK (ai.inc), line = 57
  1324
  1325 15FF AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1326 1609 A0 01			ldy #PLY.Y-DATAORIGIN
  1327 160B B1 12			lda (:bp2),y
  1328 160D CD 88 1A			cmp PLAYER1.Y
  1329 1610 F0 06			jeq l_0462x
  1330 1612 A5 5A			lda AVAILDIR
  1331 1614 25 58			and T0B
  1332 1616 D0 1E			jne l_0462
  1333 1618			l_0462x
  1334
  1335 				; optimize OK (ai.inc), line = 58
  1336
  1337 1618 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1338 1622 A0 00			ldy #PLY.X-DATAORIGIN
  1339 1624 AD 87 1A			lda PLAYER1.X
  1340 1627 D1 12			cmp (:bp2),y
  1341 1629 B0 07			jcs l_0477
  1342 162B A9 04			lda #$04
  1343 162D 85 58			sta T0B
  1344 162F 4C 36 16			jmp l_0485
  1345 1632			l_0477
  1346 1632 A9 08			lda #$08
  1347 1634 85 58			sta T0B
  1348 1636			l_0485
  1349 1636			l_0462
  1350
  1351 				; optimize OK (ai.inc), line = 61
  1352
  1353 1636 A5 5A			lda AVAILDIR
  1354 1638 25 58			and T0B
  1355 163A F0 07			jeq l_04A3
  1356 163C A5 58			lda T0B
  1357 163E 85 59			sta NEWDIR
  1358 1640 4C 46 16			jmp l_04B3
  1359 1643			l_04A3
  1360
  1361 				; optimize FAIL ('AISTRAIGHT', ai.inc), line = 62
  1362
  1363 1643 20 D0 14			jsr AISTRAIGHT
  1364 1646			l_04B3
  1365 1646			@exit
  1366 					.ifdef @new
  1367 					lda <@VarData
  1368 					sta :ztmp
  1369 					lda >@VarData
  1370 					ldy #@VarDataSize-1
  1371 					jmp @FreeMem
  1372 					els
  1373 1646 60				rts						; ret
  1374 					eif
  1375 				.endl
  1376
  1377 1647			.local	AIMAD						; PROCEDURE
  1378
  1379 				; optimize OK (ai.inc), line = 70
  1380
  1381 1647 A9 04			lda #$04
  1382 1649 20 40 11			jsr SYSTEM.RANDOM_006C
  1383 164C B5 18			lda :STACKORIGIN,x
  1384 164E 18 69 01			add #$01
  1385 1651 85 58			sta T0B
  1386 1653 CA				dex
  1387
  1388 				; optimize OK (ai.inc), line = 71
  1389
  1390 1654 A5 58			lda T0B
  1391 1656 8D B9 1A			sta @CASETMP_0006
  1392 1659 C9 01			cmp #$01
  1393 165B D0 06			jne l_04CC
  1394 165D			@
  1395
  1396 				; optimize FAIL ('AISTRAIGHT', ai.inc), line = 72
  1397
  1398 165D 20 D0 14			jsr AISTRAIGHT
  1399 1660 4C 7E 16			jmp a_0006
  1400 1663			l_04CC
  1401 1663 C9 02			cmp #$02
  1402 1665 D0 06			jne l_04D6
  1403 1667			@
  1404
  1405 				; optimize FAIL ('AIMIRROR', ai.inc), line = 73
  1406
  1407 1667 20 61 15			jsr AIMIRROR
  1408 166A 4C 7E 16			jmp a_0006
  1409 166D			l_04D6
  1410 166D C9 03			cmp #$03
  1411 166F D0 06			jne l_04E0
  1412 1671			@
  1413
  1414 				; optimize FAIL ('AIRANDOM', ai.inc), line = 74
  1415
  1416 1671 20 A1 15			jsr AIRANDOM
  1417 1674 4C 7E 16			jmp a_0006
  1418 1677			l_04E0
  1419 1677 C9 04			cmp #$04
  1420 1679 D0 03			jne l_04EA
  1421 167B			@
  1422
  1423 				; optimize FAIL ('AIBULLY', ai.inc), line = 75
  1424
  1425 167B 20 DB 15			jsr AIBULLY
  1426 167E			l_04EA
  1427 167E			a_0006
  1428
  1429 				; ------------------------------------------------------------
  1430
  1431 = 1AB9			@CASETMP_0006	= DATAORIGIN+$0045
  1432
  1433 = 1AB9			@VarData	= @CASETMP_0006
  1434 = 0001			@VarDataSize	= 1
  1435
  1436 167E			@exit
  1437 					.ifdef @new
  1438 					lda <@VarData
  1439 					sta :ztmp
  1440 					lda >@VarData
  1441 					ldy #@VarDataSize-1
  1442 					jmp @FreeMem
  1443 					els
  1444 167E 60				rts						; ret
  1445 					eif
  1446 				.endl
  1447
  1448 167F			.local	HUMAN						; PROCEDURE
  1449
  1450 				; optimize OK (main.pas), line = 14
  1451
  1452 167F AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1453 1689 A0 04			ldy #PLY.DIR-DATAORIGIN
  1454 168B B1 12			lda (:bp2),y
  1455 168D 85 59			sta NEWDIR
  1456
  1457 				; optimize OK (main.pas), line = 15
  1458
  1459 168F A9 02			lda #$02
  1460 1691 8D 08 FF			sta JOY
  1461 1694 A9 FF			lda #$FF
  1462 1696 8D 30 FD			sta KEY_PIO
  1463 1699 AD 08 FF			lda JOY
  1464 169C 49 FF			eor #$FF
  1465 169E 85 58			sta T0B
  1466
  1467 				; optimize OK (main.pas), line = 17
  1468
  1469 16A0 8D BA 1A			sta @CASETMP_0007
  1470 16A3 C9 01			cmp #$01
  1471 16A5 D0 19			jne l_051A
  1472 16A7			@
  1473
  1474 				; optimize OK (main.pas), line = 18
  1475
  1476 16A7 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1477 16B1 A0 04			ldy #PLY.DIR-DATAORIGIN
  1478 16B3 B1 12			lda (:bp2),y
  1479 16B5 C9 02			cmp #$02
  1480 16B7 F0 04			jeq l_052C
  1481 16B9 A9 01			lda #$01
  1482 16BB 85 59			sta NEWDIR
  1483 16BD			l_052C
  1484
  1485 16BD 4C 14 17			jmp a_0007
  1486 16C0			l_051A
  1487 16C0 C9 02			cmp #$02
  1488 16C2 D0 19			jne l_053C
  1489 16C4			@
  1490
  1491 				; optimize OK (main.pas), line = 19
  1492
  1493 16C4 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1494 16CE A0 04			ldy #PLY.DIR-DATAORIGIN
  1495 16D0 B1 12			lda (:bp2),y
  1496 16D2 C9 01			cmp #$01
  1497 16D4 F0 04			jeq l_054E
  1498 16D6 A9 02			lda #$02
  1499 16D8 85 59			sta NEWDIR
  1500 16DA			l_054E
  1501
  1502 16DA 4C 14 17			jmp a_0007
  1503 16DD			l_053C
  1504 16DD C9 04			cmp #$04
  1505 16DF D0 19			jne l_055E
  1506 16E1			@
  1507
  1508 				; optimize OK (main.pas), line = 20
  1509
  1510 16E1 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1511 16EB A0 04			ldy #PLY.DIR-DATAORIGIN
  1512 16ED B1 12			lda (:bp2),y
  1513 16EF C9 08			cmp #$08
  1514 16F1 F0 04			jeq l_0570
  1515 16F3 A9 04			lda #$04
  1516 16F5 85 59			sta NEWDIR
  1517 16F7			l_0570
  1518
  1519 16F7 4C 14 17			jmp a_0007
  1520 16FA			l_055E
  1521 16FA C9 08			cmp #$08
  1522 16FC D0 16			jne l_0580
  1523 16FE			@
  1524
  1525 				; optimize OK (main.pas), line = 21
  1526
  1527 16FE AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1528 1708 A0 04			ldy #PLY.DIR-DATAORIGIN
  1529 170A B1 12			lda (:bp2),y
  1530 170C C9 04			cmp #$04
  1531 170E F0 04			jeq l_0592
  1532 1710 A9 08			lda #$08
  1533 1712 85 59			sta NEWDIR
  1534 1714			l_0592
  1535
  1536 1714			l_0580
  1537 1714			a_0007
  1538
  1539 				; optimize OK (main.pas), line = 24
  1540
  1541 1714 A5 59			lda NEWDIR
  1542 1716 25 5A			and AVAILDIR
  1543 1718 D0 19			jne l_05B9
  1544
  1545 				; optimize OK (main.pas), line = 25
  1546
  1547 171A AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1548 1724 A0 07			ldy #PLY.ISDEAD-DATAORIGIN
  1549 1726 A9 01			lda #$01
  1550 1728 91 12			sta (:bp2),y
  1551 172A A0 02			ldy #PLY.HEAD-DATAORIGIN
  1552 172C A9 2A			lda #$2A
  1553 172E 91 12			sta (:bp2),y
  1554 1730 CE 84 1A			dec ALIVE
  1555 1733			l_05B9
  1556
  1557 				; ------------------------------------------------------------
  1558
  1559 = 1ABA			@CASETMP_0007	= DATAORIGIN+$0046
  1560
  1561 = 1ABA			@VarData	= @CASETMP_0007
  1562 = 0001			@VarDataSize	= 1
  1563
  1564 1733			@exit
  1565 					.ifdef @new
  1566 					lda <@VarData
  1567 					sta :ztmp
  1568 					lda >@VarData
  1569 					ldy #@VarDataSize-1
  1570 					jmp @FreeMem
  1571 					els
  1572 1733 60				rts						; ret
  1573 					eif
  1574 				.endl
  1575
  1576 1734			.local	PLAYERMOVE					; PROCEDURE
  1577
  1578 				; optimize OK (main.pas), line = 33
  1579
  1580 1734 AD BB 1A			lda P
  1581 1737 8D 6A 1A			sta PLY
  1582 173A 85 12			sta :bp2
  1583 173C AD BC 1A			lda P+1
  1584 173F 8D 6B 1A			sta PLY+1
  1585 1742 85 13			sta :bp2+1
  1586 				; optimize OK (main.pas), line = 35
  1587 1744 A0 07			ldy #PLY.ISDEAD-DATAORIGIN
  1588 1746 B1 12			lda (:bp2),y
  1589 1748 F0 03 4C 42 19		jne l_05E0
  1590
  1591 				; optimize OK (main.pas), line = 37
  1592
  1593 174D A0 00			ldy #PLY.X-DATAORIGIN
  1594 174F B1 12			lda (:bp2),y
  1595 1751 8D AB 1A			sta CHECKAVAILDIR.X
  1596 1754 A0 01			ldy #PLY.Y-DATAORIGIN
  1597 1756 B1 12			lda (:bp2),y
  1598 1758 8D AC 1A			sta CHECKAVAILDIR.Y
  1599 175B 20 01 12			jsr CHECKAVAILDIR
  1600
  1601 				; optimize OK (main.pas), line = 39
  1602
  1603 175E A5 5A			lda AVAILDIR
  1604 1760 D0 36			jne l_05FA
  1605
  1606 				; optimize OK (main.pas), line = 40
  1607
  1608 1762 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1609 176C A0 07			ldy #PLY.ISDEAD-DATAORIGIN
  1610 176E A9 01			lda #$01
  1611 1770 91 12			sta (:bp2),y
  1612 1772 CE 84 1A			dec ALIVE
  1613
  1614 				; optimize OK (main.pas), line = 41
  1615
  1616 1775 A0 00			ldy #PLY.X-DATAORIGIN
  1617 1777 B1 12			lda (:bp2),y
  1618 1779 8D A7 1A			sta PUTCHAR.X
  1619 177C A0 01			ldy #PLY.Y-DATAORIGIN
  1620 177E B1 12			lda (:bp2),y
  1621 1780 8D A8 1A			sta PUTCHAR.Y
  1622 1783 A0 03			ldy #PLY.COLOUR-DATAORIGIN
  1623 1785 B1 12			lda (:bp2),y
  1624 1787 18 69 80			add #$80
  1625 178A 8D AA 1A			sta PUTCHAR.C
  1626 178D A9 57			lda #$57
  1627 178F 8D A9 1A			sta PUTCHAR.V
  1628 1792 20 71 11			jsr PUTCHAR
  1629 1795 4C 42 19			jmp l_061B
  1630 1798			l_05FA
  1631
  1632 				; optimize OK (main.pas), line = 44
  1633
  1634 1798 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1635 17A2 A0 05			ldy #PLY.BRAIN-DATAORIGIN
  1636 17A4 B1 12			lda (:bp2),y
  1637 17A6 8D BD 1A			sta @CASETMP_0008
  1638 17A9 C9 00			cmp #$00
  1639 17AB D0 06			jne l_0626
  1640 17AD			@
  1641
  1642 				; optimize FAIL ('HUMAN', main.pas), line = 45
  1643
  1644 17AD 20 7F 16			jsr HUMAN
  1645 17B0 4C E2 17			jmp a_0008
  1646 17B3			l_0626
  1647 17B3 C9 01			cmp #$01
  1648 17B5 D0 06			jne l_0630
  1649 17B7			@
  1650
  1651 				; optimize FAIL ('AISTRAIGHT', main.pas), line = 46
  1652
  1653 17B7 20 D0 14			jsr AISTRAIGHT
  1654 17BA 4C E2 17			jmp a_0008
  1655 17BD			l_0630
  1656 17BD C9 02			cmp #$02
  1657 17BF D0 06			jne l_063A
  1658 17C1			@
  1659
  1660 				; optimize FAIL ('AIMIRROR', main.pas), line = 47
  1661
  1662 17C1 20 61 15			jsr AIMIRROR
  1663 17C4 4C E2 17			jmp a_0008
  1664 17C7			l_063A
  1665 17C7 C9 03			cmp #$03
  1666 17C9 D0 06			jne l_0644
  1667 17CB			@
  1668
  1669 				; optimize FAIL ('AIRANDOM', main.pas), line = 48
  1670
  1671 17CB 20 A1 15			jsr AIRANDOM
  1672 17CE 4C E2 17			jmp a_0008
  1673 17D1			l_0644
  1674 17D1 C9 04			cmp #$04
  1675 17D3 D0 06			jne l_064E
  1676 17D5			@
  1677
  1678 				; optimize FAIL ('AIBULLY', main.pas), line = 49
  1679
  1680 17D5 20 DB 15			jsr AIBULLY
  1681 17D8 4C E2 17			jmp a_0008
  1682 17DB			l_064E
  1683 17DB C9 07			cmp #$07
  1684 17DD D0 03			jne l_0658
  1685 17DF			@
  1686
  1687 				; optimize FAIL ('AIMAD', main.pas), line = 50
  1688
  1689 17DF 20 47 16			jsr AIMAD
  1690 17E2			l_0658
  1691 17E2			a_0008
  1692
  1693 				; optimize OK (main.pas), line = 53
  1694
  1695 17E2 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1696 17EC A0 04			ldy #PLY.DIR-DATAORIGIN
  1697 17EE B1 12			lda (:bp2),y
  1698 17F0 C5 59			cmp NEWDIR
  1699 17F2 D0 14			jne l_0677
  1700
  1701 				; optimize OK (main.pas), line = 54
  1702
  1703 17F4 A5 59			lda NEWDIR
  1704 17F6 29 0C			and #$0C
  1705 17F8 F0 07			jeq l_068E
  1706 17FA A9 40			lda #$40
  1707 17FC 85 58			sta T0B
  1708 17FE 4C 05 18			jmp l_069C
  1709 1801			l_068E
  1710 1801 A9 42			lda #$42
  1711 1803 85 58			sta T0B
  1712 1805			l_069C
  1713 1805 4C 78 18			jmp l_06A9
  1714 1808			l_0677
  1715
  1716 				; optimize OK (main.pas), line = 56
  1717
  1718 1808 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1719 1812 A0 04			ldy #PLY.DIR-DATAORIGIN
  1720 1814 B1 12			lda (:bp2),y
  1721 1816 29 0A			and #$0A
  1722 1818 F0 0A			jeq l_06CF
  1723 181A A5 59			lda NEWDIR
  1724 181C 29 05			and #$05
  1725 181E F0 04			jeq l_06CF
  1726 1820 A9 7D			lda #$7D
  1727 1822 85 58			sta T0B
  1728 1824			l_06CF
  1729
  1730 				; optimize OK (main.pas), line = 57
  1731
  1732 1824 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1733 182E A0 04			ldy #PLY.DIR-DATAORIGIN
  1734 1830 B1 12			lda (:bp2),y
  1735 1832 29 09			and #$09
  1736 1834 F0 0A			jeq l_06FC
  1737 1836 A5 59			lda NEWDIR
  1738 1838 29 06			and #$06
  1739 183A F0 04			jeq l_06FC
  1740 183C A9 6E			lda #$6E
  1741 183E 85 58			sta T0B
  1742 1840			l_06FC
  1743
  1744 				; optimize OK (main.pas), line = 58
  1745
  1746 1840 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1747 184A A0 04			ldy #PLY.DIR-DATAORIGIN
  1748 184C B1 12			lda (:bp2),y
  1749 184E 29 06			and #$06
  1750 1850 F0 0A			jeq l_0729
  1751 1852 A5 59			lda NEWDIR
  1752 1854 29 09			and #$09
  1753 1856 F0 04			jeq l_0729
  1754 1858 A9 6D			lda #$6D
  1755 185A 85 58			sta T0B
  1756 185C			l_0729
  1757
  1758 				; optimize OK (main.pas), line = 59
  1759
  1760 185C AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1761 1866 A0 04			ldy #PLY.DIR-DATAORIGIN
  1762 1868 B1 12			lda (:bp2),y
  1763 186A 29 05			and #$05
  1764 186C F0 0A			jeq l_0756
  1765 186E A5 59			lda NEWDIR
  1766 1870 29 0A			and #$0A
  1767 1872 F0 04			jeq l_0756
  1768 1874 A9 70			lda #$70
  1769 1876 85 58			sta T0B
  1770 1878			l_0756
  1771 1878			l_06A9
  1772
  1773 				; optimize OK (main.pas), line = 61
  1774
  1775 1878 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1776 1882 A0 00			ldy #PLY.X-DATAORIGIN
  1777 1884 B1 12			lda (:bp2),y
  1778 1886 8D A7 1A			sta PUTCHAR.X
  1779 1889 A0 01			ldy #PLY.Y-DATAORIGIN
  1780 188B B1 12			lda (:bp2),y
  1781 188D 8D A8 1A			sta PUTCHAR.Y
  1782 1890 A0 03			ldy #PLY.COLOUR-DATAORIGIN
  1783 1892 B1 12			lda (:bp2),y
  1784 1894 8D AA 1A			sta PUTCHAR.C
  1785 1897 A5 58			lda T0B
  1786 1899 8D A9 1A			sta PUTCHAR.V
  1787 189C 20 71 11			jsr PUTCHAR
  1788
  1789 				; optimize OK (main.pas), line = 63
  1790
  1791 189F AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1792 18A9 A0 04			ldy #PLY.DIR-DATAORIGIN
  1793 18AB A5 59			lda NEWDIR
  1794 18AD 91 12			sta (:bp2),y
  1795
  1796 				; optimize OK (main.pas), line = 65
  1797
  1798 18AF A5 59			lda NEWDIR
  1799 18B1 8D BE 1A			sta @CASETMP_0009
  1800 18B4 C9 01			cmp #$01
  1801 18B6 D0 16			jne l_077B
  1802 18B8			@
  1803
  1804 				; optimize OK (main.pas), line = 66
  1805
  1806 18B8 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1807 18C2 A0 01			ldy #PLY.Y-DATAORIGIN
  1808 18C4 B1 12			lda (:bp2),y
  1809 18C6 38 E9 01			sub #$01
  1810 18C9 91 12			sta (:bp2),y
  1811
  1812 18CB 4C 19 19			jmp a_0009
  1813 18CE			l_077B
  1814 18CE C9 02			cmp #$02
  1815 18D0 D0 16			jne l_0785
  1816 18D2			@
  1817
  1818 				; optimize OK (main.pas), line = 67
  1819
  1820 18D2 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1821 18DC A0 01			ldy #PLY.Y-DATAORIGIN
  1822 18DE B1 12			lda (:bp2),y
  1823 18E0 18 69 01			add #$01
  1824 18E3 91 12			sta (:bp2),y
  1825
  1826 18E5 4C 19 19			jmp a_0009
  1827 18E8			l_0785
  1828 18E8 C9 04			cmp #$04
  1829 18EA D0 16			jne l_078F
  1830 18EC			@
  1831
  1832 				; optimize OK (main.pas), line = 68
  1833
  1834 18EC AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1835 18F6 A0 00			ldy #PLY.X-DATAORIGIN
  1836 18F8 B1 12			lda (:bp2),y
  1837 18FA 38 E9 01			sub #$01
  1838 18FD 91 12			sta (:bp2),y
  1839
  1840 18FF 4C 19 19			jmp a_0009
  1841 1902			l_078F
  1842 1902 C9 08			cmp #$08
  1843 1904 D0 13			jne l_0799
  1844 1906			@
  1845
  1846 				; optimize OK (main.pas), line = 69
  1847
  1848 1906 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1849 1910 A0 00			ldy #PLY.X-DATAORIGIN
  1850 1912 B1 12			lda (:bp2),y
  1851 1914 18 69 01			add #$01
  1852 1917 91 12			sta (:bp2),y
  1853
  1854 1919			l_0799
  1855 1919			a_0009
  1856
  1857 				; optimize OK (main.pas), line = 72
  1858
  1859 1919 AC 6A 1A 84 12 AC + 	mwy PLY :bp2
  1860 1923 A0 00			ldy #PLY.X-DATAORIGIN
  1861 1925 B1 12			lda (:bp2),y
  1862 1927 8D A7 1A			sta PUTCHAR.X
  1863 192A A0 01			ldy #PLY.Y-DATAORIGIN
  1864 192C B1 12			lda (:bp2),y
  1865 192E 8D A8 1A			sta PUTCHAR.Y
  1866 1931 A0 02			ldy #PLY.HEAD-DATAORIGIN
  1867 1933 B1 12			lda (:bp2),y
  1868 1935 8D A9 1A			sta PUTCHAR.V
  1869 1938 A0 03			ldy #PLY.COLOUR-DATAORIGIN
  1870 193A B1 12			lda (:bp2),y
  1871 193C 8D AA 1A			sta PUTCHAR.C
  1872 193F 20 71 11			jsr PUTCHAR
  1873 1942			l_061B
  1874 1942			l_05E0
  1875
  1876 				; ------------------------------------------------------------
  1877
  1878 = 1ABB			P	= DATAORIGIN+$0047
  1879 = 1ABD			@CASETMP_0008	= DATAORIGIN+$0049
  1880 = 1ABE			@CASETMP_0009	= DATAORIGIN+$004A
  1881
  1882 = 1ABB			@VarData	= P
  1883 = 0004			@VarDataSize	= 4
  1884
  1885 1942			@exit
  1886 					.ifdef @new
  1887 					lda <@VarData
  1888 					sta :ztmp
  1889 					lda >@VarData
  1890 					ldy #@VarDataSize-1
  1891 					jmp @FreeMem
  1892 					els
  1893 1942 60				rts						; ret
  1894 					eif
  1895 				.endl
  1896
  1897 1943			.local	STARTSCREEN					; PROCEDURE
  1898
  1899 				; --- RepeatUntilProlog
  1900 1943			l_07B6
  1901
  1902 				; optimize OK (main.pas), line = 84
  1903
  1904 1943 A9 02			lda #$02
  1905 1945 8D 08 FF			sta JOY
  1906 1948 A9 FF			lda #$FF
  1907 194A 8D 30 FD			sta KEY_PIO
  1908 194D AD 08 FF			lda JOY
  1909 1950 49 FF			eor #$FF
  1910 1952 85 58			sta T0B
  1911
  1912 				; optimize OK (main.pas), line = 85
  1913
  1914 1954 C9 40			cmp #$40
  1915 1956 D0 EB			jne l_07B6
  1916 1958			@exit
  1917 					.ifdef @new
  1918 					lda <@VarData
  1919 					sta :ztmp
  1920 					lda >@VarData
  1921 					ldy #@VarDataSize-1
  1922 					jmp @FreeMem
  1923 					els
  1924 1958 60				rts						; ret
  1925 					eif
  1926 				.endl
  1927
  1928 1959			.local	MAINLOOP					; PROCEDURE
  1929
  1930 				; optimize FAIL ('INITPLAYFIELD', main.pas), line = 92
  1931
  1932 1959 20 BF 12			jsr INITPLAYFIELD
  1933
  1934 				; optimize FAIL ('STARTSCREEN', main.pas), line = 93
  1935
  1936 195C 20 43 19			jsr STARTSCREEN
  1937
  1938 				; optimize OK (main.pas), line = 95
  1939
  1940 195F A9 FF			lda #$FF
  1941 1961 8D 84 1A			sta ALIVE
  1942
  1943 				; optimize OK (main.pas), line = 96
  1944
  1945 1964 AD 8E 1A			lda PLAYER1.ISDEAD
  1946 1967 D0 03			jne l_07EE
  1947 1969 EE 84 1A			inc ALIVE
  1948 196C			l_07EE
  1949
  1950 				; optimize OK (main.pas), line = 97
  1951
  1952 196C AD 96 1A			lda PLAYER2.ISDEAD
  1953 196F D0 03			jne l_0804
  1954 1971 EE 84 1A			inc ALIVE
  1955 1974			l_0804
  1956
  1957 				; optimize OK (main.pas), line = 98
  1958
  1959 1974 AD 9E 1A			lda PLAYER3.ISDEAD
  1960 1977 D0 03			jne l_081A
  1961 1979 EE 84 1A			inc ALIVE
  1962 197C			l_081A
  1963
  1964 				; optimize OK (main.pas), line = 99
  1965
  1966 197C AD A6 1A			lda PLAYER4.ISDEAD
  1967 197F D0 03			jne l_0830
  1968 1981 EE 84 1A			inc ALIVE
  1969 1984			l_0830
  1970
  1971 				; --- RepeatUntilProlog
  1972 1984			l_0838
  1973
  1974 				; optimize OK (main.pas), line = 102
  1975
  1976 1984 A9 03			lda #$03
  1977 1986 8D 80 1A			sta SYSTEM.PAUSE_006B.N
  1978 1989 A9 00			lda #$00
  1979 198B 8D 81 1A			sta SYSTEM.PAUSE_006B.N+1
  1980 198E 20 23 11			jsr SYSTEM.PAUSE_006B
  1981
  1982 				; optimize OK (main.pas), line = 103
  1983
  1984 1991 AD 6C 1A			lda PLAYER1
  1985 1994 8D BB 1A			sta PLAYERMOVE.P
  1986 1997 AD 6D 1A			lda PLAYER1+1
  1987 199A 8D BC 1A			sta PLAYERMOVE.P+1
  1988 199D 20 34 17			jsr PLAYERMOVE
  1989 19A0 AD 6E 1A			lda PLAYER2
  1990 19A3 8D BB 1A			sta PLAYERMOVE.P
  1991 19A6 AD 6F 1A			lda PLAYER2+1
  1992 19A9 8D BC 1A			sta PLAYERMOVE.P+1
  1993 19AC 20 34 17			jsr PLAYERMOVE
  1994
  1995 				; optimize OK (main.pas), line = 104
  1996
  1997 19AF AD 70 1A			lda PLAYER3
  1998 19B2 8D BB 1A			sta PLAYERMOVE.P
  1999 19B5 AD 71 1A			lda PLAYER3+1
  2000 19B8 8D BC 1A			sta PLAYERMOVE.P+1
  2001 19BB 20 34 17			jsr PLAYERMOVE
  2002 19BE AD 72 1A			lda PLAYER4
  2003 19C1 8D BB 1A			sta PLAYERMOVE.P
  2004 19C4 AD 73 1A			lda PLAYER4+1
  2005 19C7 8D BC 1A			sta PLAYERMOVE.P+1
  2006 19CA 20 34 17			jsr PLAYERMOVE
  2007
  2008 				; optimize OK (main.pas), line = 105
  2009
  2010 19CD AD 84 1A			lda ALIVE
  2011 19D0 F0 04			jeq l_0838x
  2012 19D2 C9 FF			cmp #$FF
  2013 19D4 D0 AE			jne l_0838
  2014 19D6			l_0838x
  2015
  2016 				; optimize OK (main.pas), line = 107
  2017
  2018 19D6 AD 8E 1A			lda PLAYER1.ISDEAD
  2019 19D9 D0 03			jne l_086E
  2020 19DB EE 8D 1A			inc PLAYER1.SCORE
  2021 19DE			l_086E
  2022
  2023 				; optimize OK (main.pas), line = 108
  2024
  2025 19DE AD 96 1A			lda PLAYER2.ISDEAD
  2026 19E1 D0 03			jne l_0884
  2027 19E3 EE 95 1A			inc PLAYER2.SCORE
  2028 19E6			l_0884
  2029
  2030 				; optimize OK (main.pas), line = 109
  2031
  2032 19E6 AD 9E 1A			lda PLAYER3.ISDEAD
  2033 19E9 D0 03			jne l_089A
  2034 19EB EE 9D 1A			inc PLAYER3.SCORE
  2035 19EE			l_089A
  2036
  2037 				; optimize OK (main.pas), line = 110
  2038
  2039 19EE AD A6 1A			lda PLAYER4.ISDEAD
  2040 19F1 D0 03			jne l_08B0
  2041 19F3 EE A5 1A			inc PLAYER4.SCORE
  2042 19F6			l_08B0
  2043
  2044 				; optimize OK (main.pas), line = 112
  2045
  2046 19F6 A9 64			lda #$64
  2047 19F8 8D 80 1A			sta SYSTEM.PAUSE_006B.N
  2048 19FB A9 00			lda #$00
  2049 19FD 8D 81 1A			sta SYSTEM.PAUSE_006B.N+1
  2050 1A00 20 23 11			jsr SYSTEM.PAUSE_006B
  2051 1A03			@exit
  2052 					.ifdef @new
  2053 					lda <@VarData
  2054 					sta :ztmp
  2055 					lda >@VarData
  2056 					ldy #@VarDataSize-1
  2057 					jmp @FreeMem
  2058 					els
  2059 1A03 60				rts						; ret
  2060 					eif
  2061 				.endl
  2062 1A04			l_0007
  2063
  2064 				; --- RepeatUntilProlog
  2065 1A04			l_08BB
  2066
  2067 				; optimize OK (main.pas), line = 119
  2068
  2069 1A04 A9 30			lda #$30
  2070 1A06 8D 8D 1A			sta PLAYER1.SCORE
  2071 1A09 8D 95 1A			sta PLAYER2.SCORE
  2072
  2073 				; optimize OK (main.pas), line = 120
  2074
  2075 1A0C 8D 9D 1A			sta PLAYER3.SCORE
  2076 1A0F 8D A5 1A			sta PLAYER4.SCORE
  2077
  2078 				; optimize OK (main.pas), line = 122
  2079
  2080 1A12 A9 00			lda #$00
  2081 1A14 8D 86 1A			sta GAMEOVER
  2082
  2083 				; --- RepeatUntilProlog
  2084 1A17			l_08D0
  2085
  2086 				; optimize FAIL ('MAINLOOP', main.pas), line = 124
  2087
  2088 1A17 20 59 19			jsr MAINLOOP
  2089
  2090 				; optimize OK (main.pas), line = 125
  2091
  2092 1A1A AD 8D 1A			lda PLAYER1.SCORE
  2093 1A1D C9 39			cmp #$39
  2094 1A1F D0 05			jne l_08E3
  2095 1A21 A9 01			lda #$01
  2096 1A23 8D 86 1A			sta GAMEOVER
  2097 1A26			l_08E3
  2098
  2099 				; optimize OK (main.pas), line = 126
  2100
  2101 1A26 AD 95 1A			lda PLAYER2.SCORE
  2102 1A29 C9 39			cmp #$39
  2103 1A2B D0 05			jne l_08FC
  2104 1A2D A9 01			lda #$01
  2105 1A2F 8D 86 1A			sta GAMEOVER
  2106 1A32			l_08FC
  2107
  2108 				; optimize OK (main.pas), line = 127
  2109
  2110 1A32 AD 9D 1A			lda PLAYER3.SCORE
  2111 1A35 C9 39			cmp #$39
  2112 1A37 D0 05			jne l_0915
  2113 1A39 A9 01			lda #$01
  2114 1A3B 8D 86 1A			sta GAMEOVER
  2115 1A3E			l_0915
  2116
  2117 				; optimize OK (main.pas), line = 128
  2118
  2119 1A3E AD A5 1A			lda PLAYER4.SCORE
  2120 1A41 C9 39			cmp #$39
  2121 1A43 D0 05			jne l_092E
  2122 1A45 A9 01			lda #$01
  2123 1A47 8D 86 1A			sta GAMEOVER
  2124 1A4A			l_092E
  2125
  2126 				; optimize OK (main.pas), line = 129
  2127
  2128 1A4A AD 86 1A			lda GAMEOVER
  2129 1A4D F0 C8			jeq l_08D0
  2130
  2131 				; optimize FAIL ('SHOWSCORE', main.pas), line = 130
  2132
  2133 1A4F 20 9C 11			jsr SHOWSCORE
  2134
  2135 				; optimize OK (main.pas), line = 132
  2136
  2137 1A52 A9 C8			lda #$C8
  2138 1A54 8D 80 1A			sta SYSTEM.PAUSE_006B.N
  2139 1A57 A9 00			lda #$00
  2140 1A59 8D 81 1A			sta SYSTEM.PAUSE_006B.N+1
  2141 1A5C 20 23 11			jsr SYSTEM.PAUSE_006B
  2142
  2143 				; optimize OK (main.pas), line = 133
  2144
  2145 1A5F 4C 04 1A			jmp l_08BB
  2146
  2147 				; ------------------------------------------------------------
  2148
  2149 = 0800			ATTRIBUTE_ADDR	= $0800
  2150 = 0C00			SCREEN_ADDR	= $0C00
  2151 = 0020			EMPTY	= $20
  2152 = 00A0			WALL	= $A0
  2153 = 0041			WALL_COLOUR	= $41
  2154 = 0030			ZERO	= $30
  2155 = 0056			OBSTACLE	= $56
  2156 = 0035			OBST_COLOUR	= $35
  2157 = 0051			PLY_HEAD	= $51
  2158 = 0057			PLY_CRASH	= $57
  2159 = 002A			PLY_CRASH_1	= $2A
  2160 = 0042			PLY_TAIL_UD	= $42
  2161 = 0040			PLY_TAIL_LR	= $40
  2162 = 007D			PLY_TAIL_RD	= $7D
  2163 = 006E			PLY_TAIL_RU	= $6E
  2164 = 006D			PLY_TAIL_LD	= $6D
  2165 = 0070			PLY_TAIL_LU	= $70
  2166 = 005F			PLY1_COLOUR	= $5F
  2167 = 005D			PLY2_COLOUR	= $5D
  2168 = 0071			PLY3_COLOUR	= $71
  2169 = 0055			PLY4_COLOUR	= $55
  2170 = 0000			PLY_CTRL	= $00
  2171 = 0001			AI_STRAIGHT	= $01
  2172 = 0002			AI_MIRROR	= $02
  2173 = 0003			AI_RANDOM	= $03
  2174 = 0004			AI_BULLY	= $04
  2175 = 0007			AI_MAD	= $07
  2176 = 0001			JOY_UP	= $01
  2177 = 0002			JOY_DOWN	= $02
  2178 = 0004			JOY_LEFT	= $04
  2179 = 0008			JOY_RIGHT	= $08
  2180 = 0040			JOY_FIRE	= $40
  2181 = 0002			JOY_SELECT_1	= $02
  2182 = 0004			JOY_SELECT_2	= $04
  2183 = 100E			adr.MUL40	= CODEORIGIN+$0000
  2184 1A62			.var MUL40	= adr.MUL40 .word
  2185 = 1040			adr.DIRECTION	= CODEORIGIN+$0032
  2186 1A62			.var DIRECTION	= adr.DIRECTION .word
  2187 = FD30			KEY_PIO	= $FD30
  2188 = FF08			JOY	= $FF08
  2189 = FF15			BORDERCOLOR	= $FF15
  2190 = FF19			BGCOLOR	= $FF19
  2191 = 0058			T0B	= $58
  2192 = 0059			NEWDIR	= $59
  2193 = 005A			AVAILDIR	= $5A
  2194 = 005B			T0W	= $5B
  2195 = 005D			adr.PLY	= $5D
  2196 1A62			.var PLY	= adr.PLY .word
  2197 = 1A74			PLY.X	= DATAORIGIN+$0000
  2198 = 1A75			PLY.Y	= DATAORIGIN+$0001
  2199 = 1A76			PLY.HEAD	= DATAORIGIN+$0002
  2200 = 1A77			PLY.COLOUR	= DATAORIGIN+$0003
  2201 = 1A78			PLY.DIR	= DATAORIGIN+$0004
  2202 = 1A79			PLY.BRAIN	= DATAORIGIN+$0005
  2203 = 1A7A			PLY.SCORE	= DATAORIGIN+$0006
  2204 = 1A7B			PLY.ISDEAD	= DATAORIGIN+$0007
  2205 = 1A84			ALIVE	= DATAORIGIN+$0010
  2206 = 1A85			SPEED	= DATAORIGIN+$0011
  2207 = 1A86			GAMEOVER	= DATAORIGIN+$0012
  2208 = 1A87			adr.PLAYER1	= [DATAORIGIN+$0013] .array [6]
  2209 1A62			.var PLAYER1	= adr.PLAYER1 .word
  2210 = 1A87			PLAYER1.X	= DATAORIGIN+$0013
  2211 = 1A88			PLAYER1.Y	= DATAORIGIN+$0014
  2212 = 1A89			PLAYER1.HEAD	= DATAORIGIN+$0015
  2213 = 1A8A			PLAYER1.COLOUR	= DATAORIGIN+$0016
  2214 = 1A8B			PLAYER1.DIR	= DATAORIGIN+$0017
  2215 = 1A8C			PLAYER1.BRAIN	= DATAORIGIN+$0018
  2216 = 1A8D			PLAYER1.SCORE	= DATAORIGIN+$0019
  2217 = 1A8E			PLAYER1.ISDEAD	= DATAORIGIN+$001A
  2218 = 1A8F			adr.PLAYER2	= [DATAORIGIN+$001B] .array [6]
  2219 1A62			.var PLAYER2	= adr.PLAYER2 .word
  2220 = 1A8F			PLAYER2.X	= DATAORIGIN+$001B
  2221 = 1A90			PLAYER2.Y	= DATAORIGIN+$001C
  2222 = 1A91			PLAYER2.HEAD	= DATAORIGIN+$001D
  2223 = 1A92			PLAYER2.COLOUR	= DATAORIGIN+$001E
  2224 = 1A93			PLAYER2.DIR	= DATAORIGIN+$001F
  2225 = 1A94			PLAYER2.BRAIN	= DATAORIGIN+$0020
  2226 = 1A95			PLAYER2.SCORE	= DATAORIGIN+$0021
  2227 = 1A96			PLAYER2.ISDEAD	= DATAORIGIN+$0022
  2228 = 1A97			adr.PLAYER3	= [DATAORIGIN+$0023] .array [6]
  2229 1A62			.var PLAYER3	= adr.PLAYER3 .word
  2230 = 1A97			PLAYER3.X	= DATAORIGIN+$0023
  2231 = 1A98			PLAYER3.Y	= DATAORIGIN+$0024
  2232 = 1A99			PLAYER3.HEAD	= DATAORIGIN+$0025
  2233 = 1A9A			PLAYER3.COLOUR	= DATAORIGIN+$0026
  2234 = 1A9B			PLAYER3.DIR	= DATAORIGIN+$0027
  2235 = 1A9C			PLAYER3.BRAIN	= DATAORIGIN+$0028
  2236 = 1A9D			PLAYER3.SCORE	= DATAORIGIN+$0029
  2237 = 1A9E			PLAYER3.ISDEAD	= DATAORIGIN+$002A
  2238 = 1A9F			adr.PLAYER4	= [DATAORIGIN+$002B] .array [6]
  2239 1A62			.var PLAYER4	= adr.PLAYER4 .word
  2240 = 1A9F			PLAYER4.X	= DATAORIGIN+$002B
  2241 = 1AA0			PLAYER4.Y	= DATAORIGIN+$002C
  2242 = 1AA1			PLAYER4.HEAD	= DATAORIGIN+$002D
  2243 = 1AA2			PLAYER4.COLOUR	= DATAORIGIN+$002E
  2244 = 1AA3			PLAYER4.DIR	= DATAORIGIN+$002F
  2245 = 1AA4			PLAYER4.BRAIN	= DATAORIGIN+$0030
  2246 = 1AA5			PLAYER4.SCORE	= DATAORIGIN+$0031
  2247 = 1AA6			PLAYER4.ISDEAD	= DATAORIGIN+$0032
  2248 1A62			@exit
  2249
  2250 1A62 A2 00		@halt	ldx #$00
  2251 1A64 9A				txs
  2252
  2253 1A65 60				rts
  2254
  2255 				; ------------------------------------------------------------
  2256
  2257 				; ------------------------------------------------------------
  2258
  2259 1A66			.local	@DEFINES
  2260 1A66			C4P
  2261 				.endl
  2262
  2263 1A66			.local	@RESOURCE
  2264 				.endl
  2265
  2266 = 1A66 0E 10		MUL40
  2266 = 1A68 40 10		DIRECTION
  2266 = 1A6A 5D 00		PLY
  2266 = 1A6C 87 1A		PLAYER1
  2266 = 1A6E 8F 1A		PLAYER2
  2266 = 1A70 97 1A		PLAYER3
  2266 = 1A72 9F 1A		PLAYER4
  2266 				.endl							; MAIN
  2267
  2268 				; ------------------------------------------------------------
  2269 				; ------------------------------------------------------------
  2270
  2271 				.macro	UNITINITIALIZATION
  2272 				
  2273 					.ifdef MAIN.SYSTEM.@UnitInit
  2274 					jsr MAIN.SYSTEM.@UnitInit
  2275 					eif
  2276 				.endm
  2277
  2278 				; ------------------------------------------------------------
  2279
  2280 					ift .SIZEOF(MAIN.SYSTEM) > 0
  2281 					.print 'SYSTEM: ',MAIN.SYSTEM,'..',MAIN.SYSTEM+.SIZEOF(MAIN.SYSTEM)-1
  2281 				SYSTEM: $10D5..$1170
  2282 					eif
  2283
  2284 					.print 'CODE: ',CODEORIGIN,'..',MAIN.@RESOURCE-1
  2284 				CODE: $100E..$1A65
  2285
  2286 				; ------------------------------------------------------------
  2287
  2288 1A74				.align $04
  2289
  2290 1A74			DATAORIGIN
  2291 1A74 28 00 18 00 2D 0C	.by  $28 $00 $18 $00 $2D $0C
  2292
  2293 = 0006			VARINITSIZE	= *-DATAORIGIN
  2294 = 004B			VARDATASIZE	= 75
  2295
  2296 = 1ABF			PROGRAMSTACK	= DATAORIGIN+VARDATASIZE
  2297
  2298 					.print 'DATA: ',DATAORIGIN,'..',PROGRAMSTACK
  2298 				DATA: $1A74..$1ABF
  2299
  2300 				; ------------------------------------------------------------
  2301
  2302 				.macro	STATICDATA
  2303 				.by  $00 $00 $28 $00 $50 $00 $78 $00  $A0 $00 $C8 $00 $F0 $00 $18 $01  $40 $01 $68 $01 $90 $01 $B8 $01
  2304 				.by  $E0 $01 $08 $02 $30 $02 $58 $02  $80 $02 $A8 $02 $D0 $02 $F8 $02  $20 $03 $48 $03 $70 $03 $98 $03
  2305 				.by  $C0 $03 $01 $02 $04 $08
  2306 				.endm
  2307
  2308 					end
